"use strict";(self["webpackChunkframe"]=self["webpackChunkframe"]||[]).push([[4034],{54034:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("home-header"),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"center"},[e.userInfo?t("div",{staticClass:"content"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.uploading,expression:"uploading"}],staticClass:"avatar-box"},[t("avatar-uploader",{attrs:{avatar:e.userInfo.avatar,"show-edit-btn":!0,size:"280"},on:{complete:e.handleAvatarSuccess}})],1),t("div",{staticClass:"info-box"},[t("div",{staticClass:"title-box"},[t("div",{staticClass:"title"},[e._v(e._s(e.$t("myPersonalInfo.ningdegerenziliao")))]),t("div",{staticClass:"subTitle"},[e._v(e._s(e.$t("myPersonalInfo.ningtigongdexinxijiangzai")))])]),t("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,"label-position":"top",rules:e.rules}},[t("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.chushengshijian"),prop:"birthday"}},[t("el-date-picker",{attrs:{type:"date","value-format":"MM/dd/yyyy",format:"MM/dd/yyyy",placeholder:""},model:{value:e.ruleForm.birthday,callback:function(t){e.$set(e.ruleForm,"birthday",t)},expression:"ruleForm.birthday"}})],1),t("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.jiuduxuexiao"),prop:"school"}},[t("el-input",{attrs:{maxlength:50,"show-word-limit":""},model:{value:e.ruleForm.school,callback:function(t){e.$set(e.ruleForm,"school",t)},expression:"ruleForm.school"}})],1),t("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.zhuanye"),prop:"major"}},[t("el-input",{attrs:{maxlength:50,"show-word-limit":""},model:{value:e.ruleForm.major,callback:function(t){e.$set(e.ruleForm,"major",t)},expression:"ruleForm.major"}})],1),t("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.yuyan"),prop:"language"}},[t("el-input",{attrs:{maxlength:50,"show-word-limit":""},model:{value:e.ruleForm.language,callback:function(t){e.$set(e.ruleForm,"language",t)},expression:"ruleForm.language"}})],1),t("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.gender"),prop:"gender"}},[t("el-select",{attrs:{placeholder:""},model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},e._l(e.genderOptions,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.jiaoxuenianling"),prop:"teaching_age"}},[t("el-input-number",{attrs:{min:0,max:100},model:{value:e.ruleForm.teaching_age,callback:function(t){e.$set(e.ruleForm,"teaching_age",t)},expression:"ruleForm.teaching_age"}})],1),t("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.xueli"),prop:"education"}},[t("el-input",{attrs:{maxlength:50,"show-word-limit":""},model:{value:e.ruleForm.education,callback:function(t){e.$set(e.ruleForm,"education",t)},expression:"ruleForm.education"}})],1),t("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.intro_me"),prop:"about_you"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:e.$t("myPersonalInfo.xieyixieyouqu")},model:{value:e.ruleForm.about_you,callback:function(t){e.$set(e.ruleForm,"about_you",t)},expression:"ruleForm.about_you"}})],1)],1),t("el-button",{staticClass:"btn",attrs:{type:"primary",loading:e.submitting},on:{click:e.save}},[e._v(e._s(e.$t("myPersonalInfo.save")))])],1)]):e._e()]),t("HomeFooter")],1)},o=[],l=a(51009),s=a(92128),i=a(51206),n=a(18031),u=a(27484),m=a.n(u),d=a(64564),c={name:"PersonalInfo",components:{AvatarUploader:d.Z,HomeFooter:n.Z,HomeHeader:l.Z},data(){return{baseURL:s.v,imageUrl:"",userInfo:null,uploading:!1,submitting:!1,loading:!1,ruleForm:{birthday:"",school:"",major:"",language:"",gender:"",teaching_age:"",education:"",about_you:""},rules:{birthday:[{required:!0,message:this.$t("tip.required"),trigger:"blur"}],language:[{required:!0,message:this.$t("tip.required"),trigger:"blur"}],gender:[{required:!0,message:this.$t("tip.required"),trigger:"blur"}],teaching_age:[{required:!0,message:this.$t("tip.required"),trigger:"blur"}],about_you:[{required:!0,message:this.$t("tip.required"),trigger:"blur"}]}}},computed:{genderOptions(){return[{id:1,label:this.$t("XuekeMenu.nan"),value:1},{id:2,label:this.$t("XuekeMenu.nv"),value:2},{id:3,label:this.$t("XuekeMenu.other"),value:3}]}},mounted(){this.getUserInfo()},methods:{async getUserInfo(){this.loading=!0;try{const e=await(0,i.LUH)();200===e.code&&(this.userInfo=e.data,this.ruleForm.birthday=e.data.birthday?m()(e.data.birthday).toDate():null,this.ruleForm.school=e.data.school,this.ruleForm.major=e.data.major,this.ruleForm.language=e.data.language,this.ruleForm.gender=parseInt(e.data.gender)||"",this.ruleForm.teaching_age=e.data.teaching_age,this.ruleForm.education=e.data.education,this.ruleForm.about_you=e.data.about_you)}catch(e){console.error(e)}this.loading=!1},async handleAvatarSuccess(e){},async save(){try{await this.$refs.ruleForm.validate(),this.submitting=!0;const e=await(0,i.cPE)(this.ruleForm);200===e.code&&await this.getUserInfo()}catch(e){console.error(e)}this.submitting=!1}}},g=c,h=a(1001),p=(0,h.Z)(g,r,o,!1,null,"2e0a26b8",null),b=p.exports}}]);