"use strict";(self["webpackChunkframe"]=self["webpackChunkframe"]||[]).push([[789],{2789:function(e,t,i){i.r(t),i.d(t,{default:function(){return F}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("HomeHeader",{attrs:{topimgIsShow:!1}}),t("div",{staticClass:"center"},[t("div",{staticClass:"ConOne"},[t("div",{staticClass:"title"},[e._v(" "+e._s(e.detailObj.name_arr)+" ")]),t("div",{staticClass:"desc"},[e._v(" "+e._s(e.detailObj.brief_text)+" ")]),t("div",{staticClass:"collectCon"},[t("i",{staticClass:"icon fa fa-heart",class:{active:e.detailObj.is_collect},on:{click:function(t){return t.stopPropagation(),e.ShouCangOrCancel(e.detailObj)}}}),t("div",{staticClass:"text"},[e._v(e._s(e.$t("ClassroomDetail.shoucang")))])]),t("div",{staticClass:"shareCon",on:{click:e.shareFun}},[t("i",{staticClass:"icon fa fa-share-square-o"}),t("div",{staticClass:"text"},[e._v(e._s(e.$t("CourseDetail.fenxiang")))])])]),t("div",{staticClass:"ConTwo"},e._l(e.detailObj.images_text,(function(i,s){return t("div",{key:s,staticClass:"item",class:"item"+s},[t("el-image",{staticClass:"img",attrs:{src:i,"preview-src-list":e.detailObj.images_text}})],1)})),0),t("div",{staticClass:"ConTre"},[t("div",{staticClass:"layoutLeft"},[t("div",{staticClass:"whoCourse"},[t("div",{staticClass:"top"},[t("div",{staticClass:"text"},[e._v(e._s(e.detailObj.brief_text))])]),t("div",{staticClass:"tagsCon"},e._l(e.detailObj.label_text,(function(i,s){return t("div",{key:i,staticClass:"item"},[t("div",{staticClass:"text"},[e._v(e._s(i))])])})),0),t("div",{staticClass:"hr"})]),t("div",{staticClass:"CanScheduleTimeCon"},[t("div",{staticClass:"title"},[e._v(" "+e._s(e.$t("ClassroomDetail.keyueyueshijian"))+" ")]),t("div",{staticClass:"timeCon"},[t("classroom-calendar")],1)])]),t("div",{staticClass:"layoutRight"},[t("div",{staticClass:"layCon"},[t("div",{staticClass:"courseKapian"},[t("div",{staticClass:"top"},[t("div",{staticClass:"price"},[e._v(" $"+e._s(e.detailObj.price)+"/"+e._s(e.$t("ClassroomDetail.xiaoshi"))+" ")]),t("div",{staticClass:"text"},[e._v(" "+e._s(e.$t("ClassroomDetail.kechengbukequxiao"))+" ")])]),e.timeEditList.length<=1&&!e.timeEditList[0].start_time&&!e.timeEditList[0].end_time?t("div",{staticClass:"courseCon",on:{click:function(t){e.dialogVisible=!0}}},[t("div",{staticClass:"up"},[t("div",{staticClass:"startTime"},[t("div",{staticClass:"text",class:{en:2==e.vuex_Language}},[e._v(" "+e._s(e.$t("CourseDetail.xuanzeyuyuekaishishijian"))+" ")]),t("div",{staticClass:"time"},[e._v(" "+e._s(e.$t("CourseDetail.qingxuan"))+" ")])]),t("div",{staticClass:"endTime"},[t("div",{staticClass:"text",class:{en:2==e.vuex_Language}},[e._v(" "+e._s(e.$t("CourseDetail.xuanzeyuyuejieshushijian"))+" ")]),t("div",{staticClass:"time"},[e._v(" "+e._s(e.$t("CourseDetail.qingxuan"))+" ")])])])]):t("div",{staticClass:"timeEditListShowList",on:{click:function(t){e.dialogVisible=!0}}},e._l(e.timeEditList,(function(i,s){return t("div",{key:i.id,staticClass:"item"},[t("div",{staticClass:"left"},[e._v(" "+e._s(e.$t("ClassroomDetail.kaishishijian"))+"："+e._s(i.riqi)+" "+e._s(i.start_time)+" ")]),t("div",{staticClass:"right"},[e._v(" "+e._s(e.$t("ClassroomDetail.jieshushijian"))+"："+e._s(i.riqi)+" "+e._s(i.end_time)+" ")])])})),0),t("div",{staticClass:"jpBtnGreen yuding",on:{click:e.yudingFun}},[e._v(" "+e._s(e.$t("ClassroomDetail.yuding"))+" ")]),t("div",{staticClass:"tip"},[e._v(" "+e._s(e.$t("ClassroomDetail.ningxianzaibuhuibeishoufei"))+" ")]),t("div",{staticClass:"row1"},[t("div",{staticClass:"lefttext"},[e._v(" "+e._s(e.$t("ClassroomDetail.jiage"))+" ")]),t("div",{staticClass:"righttext"},[e._v("$"+e._s(e.jiage))])]),t("div",{staticClass:"row2"},[t("div",{staticClass:"lefttext"},[e._v(" "+e._s(e.$t("ClassroomDetail.fuwufei"))+" ")]),t("div",{staticClass:"righttext"},[e._v(" $"+e._s(e.serviceCharge)+" ")])]),t("div",{staticClass:"hr"}),t("div",{staticClass:"row3"},[t("div",{staticClass:"lefttext"},[e._v(" "+e._s(e.$t("ClassroomDetail.zongjia"))+" ")]),t("div",{staticClass:"righttext"},[e._v(" $"+e._s(Number(e.jiage)+Number(e.serviceCharge))+" ")])])]),t("div",{staticClass:"jubaoCon",on:{click:function(t){e.JubaoVisible=!0}}},[t("img",{staticClass:"icon",attrs:{src:i(5237)}}),t("div",{staticClass:"text"},[e._v(" "+e._s(e.$t("CourseDetail.ju_bao_gai_ke_cheng"))+" ")])])])])])]),t("el-dialog",{staticClass:"searchModal",attrs:{title:e.$t("ClassroomDetail.jiaoshiyudingshijian"),visible:e.dialogVisible,width:"760px",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"modalMain"},[t("div",{staticClass:"list"},e._l(e.timeEditList,(function(i,s){return t("div",{key:i.id,staticClass:"item"},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},on:{change:function(t){return e.timeEditListRiqiSelectConfirm(t,i)}},model:{value:i.riqi,callback:function(t){e.$set(i,"riqi",t)},expression:"item.riqi"}}),t("el-time-picker",{attrs:{"picker-options":{selectableRange:i.selectableRangeArr},placeholder:"开始时间","value-format":"HH:mm"},on:{change:function(t){return e.startTimeChange(t,i)}},model:{value:i.start_time,callback:function(t){e.$set(i,"start_time",t)},expression:"item.start_time"}}),t("el-time-picker",{attrs:{"picker-options":{selectableRange:i.selectableRangeArr},placeholder:"结束时间","value-format":"HH:mm"},on:{change:function(t){return e.endTimeChange(t,i)}},model:{value:i.end_time,callback:function(t){e.$set(i,"end_time",t)},expression:"item.end_time"}}),t("el-button",{staticClass:"btn",on:{click:e.timeEditListAdd}},[e._v(" "+e._s(e.$t("ClassroomDetail.xinzeng")))]),t("el-button",{staticClass:"btn",class:{visiHide:e.timeEditList.length<=1},on:{click:function(t){return e.timeEditListRemove(s)}}},[e._v(" "+e._s(e.$t("ClassroomDetail.yichu")))])],1)})),0),t("div",{staticClass:"jpBtnGreen confirmBtn",on:{click:e.timeEditListConfirm}},[e._v(" "+e._s(e.$t("ClassroomDetail.queren"))+" ")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.cusModalConIsShow,expression:"cusModalConIsShow"}],staticClass:"cusModalCon",on:{click:function(t){e.cusModalConIsShow=!1}}},[t("div",{staticClass:"centerCon"},[t("img",{staticClass:"closeIconCon",attrs:{src:i(762),alt:""}}),t("div",{staticClass:"cusModal",on:{click:function(t){return t.stopPropagation(),e.imgShowClick.apply(null,arguments)}}},[t("img",{staticClass:"bigImg",attrs:{src:e.imgShowUrl,alt:""}})])])]),t("el-dialog",{staticClass:"jubaoModal",attrs:{title:e.$t("CourseDetail.ningweihejubao"),visible:e.JubaoVisible,width:"524px",center:""},on:{"update:visible":function(t){e.JubaoVisible=t}}},[t("div",{staticClass:"modalMain"},[t("el-form",{ref:"RefRuleForm",attrs:{model:e.jubaoForm,rules:e.Rules}},[t("el-radio-group",{model:{value:e.jubaoContent,callback:function(t){e.jubaoContent=t},expression:"jubaoContent"}},[e._l(e.jubaoOptions,(function(i,s){return t("div",{key:i.id,staticClass:"item"},[t("div",{staticClass:"leftText"},[e._v(e._s(i.name_arr))]),t("el-radio",{attrs:{label:i.name_arr}})],1)})),t("div",{staticClass:"item itemBot"},[t("div",{staticClass:"leftText"},[e._v(" "+e._s(e.$t("CourseDetail.qi_ta"))+" ")]),t("el-radio",{attrs:{label:"qita"}})],1)],2),t("el-input",{directives:[{name:"show",rawName:"v-show",value:"qita"==e.jubaoContent,expression:"jubaoContent == 'qita'"}],attrs:{placeholder:e.$t("CourseDetail.qing_shu_ru_nei_rong"),clearable:""},model:{value:e.jubaoContentOther,callback:function(t){e.jubaoContentOther=t},expression:"jubaoContentOther"}}),t("el-form-item",{attrs:{prop:"images"}},[t("div",{staticClass:"uploadTitle"},[e._v(" "+e._s(e.$t("CourseDetail.zuo_zheng_tu_pian"))+": ")]),t("div",{staticClass:"uploadCon"},[t("CustomElUpload",{ref:"customElUpload1",attrs:{template_type:"picture-card",upload_tip_text:"",files_limit:10,file_type_only:"",add_param_data:"",autoUpload:!0},model:{value:e.jubaoForm.images,callback:function(t){e.$set(e.jubaoForm,"images",t)},expression:"jubaoForm.images"}})],1)]),t("el-form-item",{attrs:{prop:"videos"}},[t("div",{staticClass:"uploadTitle"},[e._v(" "+e._s(e.$t("CourseDetail.zuo_zheng_shi_pin"))+": ")]),t("div",{staticClass:"uploadCon"},[t("CustomElUpload",{ref:"customElUpload2",attrs:{template_type:"text",upload_tip_text:"",files_limit:10,file_type_only:"",add_param_data:"",autoUpload:!0},model:{value:e.jubaoForm.videos,callback:function(t){e.$set(e.jubaoForm,"videos",t)},expression:"jubaoForm.videos"}})],1)])],1),t("div",{staticClass:"jpBtnGreen btnConfirm",on:{click:e.jubaoConfirm}},[e._v(" "+e._s(e.$t("CourseDetail.que_ren"))+" ")])],1)])],1)},a=[],o=(i(7658),i(528)),l=i(4339),r=i(1206),n=i(5828),d=i(2916),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"tool-bar"},[t("el-date-picker",{attrs:{format:"yyyy/MM/dd",type:"daterange",editable:!1,size:"large","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRangeValue,callback:function(t){e.dateRangeValue=t},expression:"dateRangeValue"}}),t("el-button",{staticClass:"btn20",attrs:{type:"primary",size:"large",loading:e.addingCycle,disabled:!e.dateRangeValue},on:{click:e.addCycle}},[e._v("添加周期")]),t("el-select",{staticClass:"dateOuter",attrs:{placeholder:"请选择",size:"large"},model:{value:e.currentDateRangeIndex,callback:function(t){e.currentDateRangeIndex=t},expression:"currentDateRangeIndex"}},e._l(e.dateList,(function(e,i){return t("el-option",{key:`${e.id}`,attrs:{label:`${e.begin_date}-${e.end_date}`,value:i}})})),1),t("el-button",{staticClass:"btn20",attrs:{type:"primary",size:"large"},on:{click:e.queryClassrooms}},[e._v("查询")])],1),t("div",[t("calendar-box",{directives:[{name:"loading",rawName:"v-loading",value:e.querying,expression:"querying"}],ref:"calendarBox",attrs:{list:e.list,"date-range":e.selectedDates},on:{onCreateItem:e.handleClassroomAdd,onEditItem:e.handleClassroomEdit,onItemClick:e.onClassroomClick,onSelectedUpdate:e.onSelectedUpdate}})],1),e.showDialog?t("classroom-adding-dialog",{attrs:{"form-value":e.formValue},on:{onSubmit:e.onClassroomUpdate},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e()],1)},c=[],m=i(7484),h=i.n(m),C=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.formValue?.id?e.$t("CourseCalendar.bianjikechengshijian"):e.$t("CourseCalendar.tianjiakechengshijian"),visible:e.showAddDialog,width:"460px","custom-class":"box","destroy-on-close":!0,center:""},on:{"update:visible":function(t){e.showAddDialog=t},close:e.onClose}},[t("div",{staticClass:"modalMain"},[t("el-form",{ref:"refAddForm",attrs:{model:e.addForm,rules:e.rules}},[t("el-form-item",{attrs:{prop:"weeks"}},[t("el-select",{attrs:{placeholder:e.$t("CourseCalendar.xuanzexingqiji"),editable:!1,disabled:!!e.formValue?.id},model:{value:e.addForm.week,callback:function(t){e.$set(e.addForm,"week",t)},expression:"addForm.week"}},e._l(e.weekOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{prop:"start_time"}},[t("el-time-select",{staticClass:"elTimeSelect",attrs:{placeholder:e.$t("CourseCalendar.qishishijian"),editable:!1,"picker-options":{start:"08:00",step:"00:15",end:"23:45"}},on:{change:function(t){return e.startTimeChange(t)}},model:{value:e.addForm.start_time,callback:function(t){e.$set(e.addForm,"start_time",t)},expression:"addForm.start_time"}})],1),t("el-form-item",{staticClass:"codeFormItem",attrs:{prop:"end_time"}},[t("el-time-select",{attrs:{placeholder:e.$t("CourseCalendar.jieshushijian"),editable:!1,"picker-options":{start:"08:00",step:"00:15",end:"23:45"}},on:{change:function(t){return e.endTimeChange(t)}},model:{value:e.addForm.end_time,callback:function(t){e.$set(e.addForm,"end_time",t)},expression:"addForm.end_time"}})],1)],1),t("div",{staticClass:"jpBtnGreen btnConfirm",on:{click:e.addClassroomConfirm}},[e._v(" "+e._s(e.$t("CourseCalendar.save_class"))+" ")])],1)])},g=[],_={name:"ClassroomAddingDialog",props:["value","formValue"],data(){return{showAddDialog:!1,addForm:{week:"",start_time:"",end_time:""}}},created(){this.formValue&&(this.addForm.id=this.formValue.id,this.addForm.week=this.formValue.week,this.addForm.start_time=this.formValue.start_time,this.addForm.end_time=this.formValue.end_time),this.showAddDialog=this.value},watch:{value(e){this.showAddDialog=e}},computed:{rules(){return{week:[{required:!0,message:this.$t("CourseCalendar.the_field_required"),trigger:"change"}],start_time:[{required:!0,message:this.$t("CourseCalendar.the_field_required"),trigger:"change"}],end_time:[{required:!0,message:this.$t("CourseCalendar.the_field_required"),trigger:"change"}]}},weekOptions(){return[{value:1,label:this.$t("CourseCalendar.xingqi1")},{value:2,label:this.$t("CourseCalendar.xingqi2")},{value:3,label:this.$t("CourseCalendar.xingqi3")},{value:4,label:this.$t("CourseCalendar.xingqi4")},{value:5,label:this.$t("CourseCalendar.xingqi5")},{value:6,label:this.$t("CourseCalendar.xingqi6")},{value:7,label:this.$t("CourseCalendar.xingqi7")}]}},methods:{startTimeChange(e){if(!this.addForm.end_time)return!1;let t=this.isEndTimeGreaterThanStartTime();t||(this.$message.error(this.$t("CourseCalendar.jieshushijianxuyaodayu")),this.addForm.start_time="")},endTimeChange(e){if(!this.addForm.start_time)return!1;let t=this.isEndTimeGreaterThanStartTime();t||(this.$message.error(this.$t("CourseCalendar.jieshushijianxuyaodayu")),this.addForm.end_time="")},isEndTimeGreaterThanStartTime(){let e=this.addForm.start_time,t=this.addForm.end_time;if(!e||!t)return!0;let i=e.split(":"),s=t.split(":"),a=60*parseInt(i[0])+parseInt(i[1]),o=60*parseInt(s[0])+parseInt(s[1]);return o>a},async addClassroomConfirm(){try{await this.$refs.refAddForm.validate(),this.showAddDialog=!1,this.$emit("onSubmit",this.addForm)}catch(e){console.log(e)}},onClose(){this.$emit("input",!1)}}},p=_,v=i(1001),b=(0,v.Z)(p,C,g,!1,null,"678e94b9",null),f=b.exports,$={name:"ClassroomCalendar",components:{ClassroomAddingDialog:f,CalendarBox:d.Z},data(){return{dateRangeValue:null,dateList:[],currentDateRangeIndex:null,showDialog:!1,list:[],formValue:null,showDelDialog:!1,id:"",addingCycle:!1,selectedDates:null,querying:!0}},created(){this.id=this.$route.query.id,this.getCycle()},methods:{onSelectedUpdate(e){this.$emit("onSelectedUpdate",{courses:e,course_date_id:this.dateList[this.currentDateRangeIndex].id})},async getCycle(){try{const e=await(0,r.dR)(this.id);if(200===e.code){console.log(e);let t=e.data.map((e=>({id:e.id,begin_date:e.begin_date.replaceAll("-","/"),end_date:e.end_date.replaceAll("-","/")})));t&&(this.dateList=[...t])}}catch(e){console.log(e)}},async addCycle(){this.addingCycle=!0;try{const e=h()(this.dateRangeValue[0]).format("YYYY-MM-DD"),t=h()(this.dateRangeValue[1]).format("YYYY-MM-DD"),i=await(0,r.ic)(this.id,e,t);200===i.code&&(this.$message.success(this.$t("CourseCalendar.tianjiachengg")),this.dateList.push({id:i.data.id,begin_date:e.replaceAll("-","/"),end_date:t.replaceAll("-","/")}),console.log(this.dateList),this.dateRangeValue=null)}catch(e){console.log(e)}this.addingCycle=!1},onClassroomClick(e){e.selected=!e.selected,this.list=[...this.list]},async onClassroomUpdate(e){this.querying=!0;try{if(e.id){const t=await(0,r.T)(e.id,{day:e.week,...e});200===t.code&&await this.queryClassrooms()}else{const t=await(0,r.a4)(this.id,this.selectedDates.id,{day:e.week,...e});200===t.code&&await this.queryClassrooms()}}catch(t){console.log(t)}this.querying=!1},handleClassroomAdd(e){e&&(this.formValue=e,this.showDialog=!0,console.log("selected"))},handleClassroomEdit(e){this.formValue=e,this.showDialog=!0},async queryClassrooms(){this.querying=!0,this.selectedDates=this.dateList[this.currentDateRangeIndex];try{const e=await(0,r.Qs)(this.id,this.selectedDates.id);200===e.code&&(this.list=e.data)}catch(e){console.log(e)}this.querying=!1},unselectClassById(e){this.$refs.calendarBox.unselectItem(e)}}},w=$,y=(0,v.Z)(w,u,c,!1,null,"2396efc0",null),D=y.exports,j={name:"headercom",components:{ClassroomCalendar:D,CalendarBox:d.Z,HomeHeader:o.Z,DateRangePanel:l.Z,CustomElUpload:n.Z},data(){return{colors:["#69C8C5","#69C8C5","#69C8C5"],options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],value:"",timeData:"",detailObj:{},dialogVisible:!1,timeEditList:[{id:1,riqi:"",start_time:"",end_time:"",selectableRangeArr:[]}],jiage:0,zongjia:0,serviceCharge:"",cusModalConIsShow:!1,imgShowUrl:"",JubaoVisible:!1,jubaoContent:"",jubaoContentOther:"",jubaoOptions:[],jubaoForm:{images:"",videos:""},Rules:{},previewForm:{xueke:"",area:"",address:"",classroomImgs:"",classroomName:"",classroomDescribe:"",label_ids:"",price:""},allowSubmit:!0,unYuYueDataArr:[],kaifangRiqiFanweiArr:[],pickerOptions:{}}},watch:{},mounted(){this.getList(),this.getJubaoOptions()},methods:{disabledDate(e){const t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),a=`${t}-${i}-${s}`,o=this.unYuYueDataArr.includes(a);return o},convertData(e){return new Date(Date.parse(e.replace(/-/g,"/")))},JumpDetail(){this.$router.push({path:"/CourseDetail"})},yudingFun(){let e=this.$route.query.id,t=[];for(let s of this.timeEditList)t.push({start_time:s.riqi+" "+s.start_time,end_time:s.riqi+" "+s.end_time});let i={id:e,book_times:t};(0,r.g5)(i).then((t=>{if(200==t.code){let i=t.data,s=i;this.$u.vuex("vuex_ClassRoomOrderNum."+e,s),this.$router.push({path:"/ClassRoomXiadan",query:{id:e}})}}))},async getList(){let e=this.$route.query.id,t=this;try{const i=await(0,r.pM)({id:e});if(200==i.code){this.detailObj=i.data;let e=i.data,s=e?.classroom_date,a=e?.book_times,o=[s.start_time,s.end_time];console.log("keYuyueArr",o),this.timeData=o,this.kaifangRiqiFanweiArr=this.generateAvailableSlots(s,a);let l=[],r=[];for(let t of this.kaifangRiqiFanweiArr)"full"==t.AppointmentStatus?l.push(t.time):r.push(t.time);this.unYuYueDataArr=l,this.pickerOptions={disabledDate(e){const i=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),o=`${i}-${s}-${a}`;if(!r.includes(o))return!0;const l=t.unYuYueDataArr.includes(o);return l}}}}catch(i){console.error(i)}},generateAvailableSlots(e,t){const i=new Date(e.start_time),s=new Date(e.end_time);let a=[];for(let o=i;o<=s;o.setDate(o.getDate()+1)){const i=o.toISOString().split("T")[0];let s={time:i,AppointmentStatus:"none",OptionalTimePeriod:JSON.parse(JSON.stringify(e.classroom_times))};t.forEach((e=>{const t=new Date(e.start_time),a=new Date(e.end_time),o=t.toISOString().split("T")[0];o===i&&(s.OptionalTimePeriod=s.OptionalTimePeriod.reduce(((e,i)=>{if(t.getHours()<parseInt(i.end_time)&&a.getHours()>parseInt(i.start_time)){if(t.getHours()<=parseInt(i.start_time)&&a.getHours()>=parseInt(i.end_time))return e;t.getHours()>parseInt(i.start_time)&&e.push({start_time:i.start_time,end_time:t.toTimeString().split(" ")[0]}),a.getHours()<parseInt(i.end_time)&&e.push({start_time:a.toTimeString().split(" ")[0],end_time:i.end_time})}else e.push(i);return e}),[]),0===s.OptionalTimePeriod.length?s.AppointmentStatus="full":s.AppointmentStatus="NotFull")})),"none"===s.AppointmentStatus&&(s.AppointmentStatus=s.OptionalTimePeriod.length>0?"none":"full"),a.push(s)}return a},ShouCangOrCancel(e){(0,r._J)({id:e.id}).then((e=>{200==e.code&&this.getList()}))},timeEditListAdd(){this.timeEditList.push({id:this.$commonFun.getRamdomId(8),riqi:"",start_time:"",end_time:"",selectableRangeArr:[]})},timeEditListRemove(e){this.timeEditList.splice(e,1)},timeEditListConfirm(){this.dialogVisible=!1;const e=this.calculateTotalTimeAndPrice(this.timeEditList,this.detailObj.price);this.jiage=e.totalPrice.toFixed(2),this.serviceChargeFun()},calculateTotalTimeAndPrice(e,t){let i=0;for(const o of e){const e=new Date(o.riqi+" "+o.start_time),t=new Date(o.riqi+" "+o.end_time),s=(t-e)/6e4;i+=s}const s=t,a=i/60*s;return{totalTimeInMinutes:i,totalPrice:a}},serviceChargeFun(){let e=this.detailObj?.service_ratio||"",t=e.replace("%",""),i=parseFloat(t)/100;this.serviceCharge=(this.jiage*i).toFixed(2)},timeEditListRiqiSelectConfirm(e,t){let i=[],s=this.kaifangRiqiFanweiArr.find(((t,i,s)=>t.time==e));if(s)for(let a of s.OptionalTimePeriod)i.push(a.start_time+"-"+a.end_time);t.selectableRangeArr=i},startTimeChange(e,t){if(console.log(111),!t.end_time)return!1;const i=this.timeToMinutes(t.start_time),s=this.timeToMinutes(t.end_time);console.log("startTime",t.start_time,"endTime",t.end_time),s<=i?(console.log("小于"),this.$message.error(this.$t("CourseCalendar.jieshushijianxuyaodayu")),t.start_time=""):console.log("大于")},endTimeChange(e,t){if(!t.start_time)return!1;const i=this.timeToMinutes(t.start_time),s=this.timeToMinutes(t.end_time);s<=i&&(this.$message.error(this.$t("CourseCalendar.jieshushijianxuyaodayu")),t.end_time="")},timeToMinutes(e){if(!e)return 0;const[t,i]=e.split(":").map(Number);return 60*t+i},ImgshowFun(e){this.imgShowUrl=e,this.cusModalConIsShow=!0},imgShowClick(){return!1},getJubaoOptions(){(0,r.e5)({type:2}).then((e=>{if(200==e.code){let t=e.data;this.jubaoOptions=t}}))},jubaoConfirm(){let e=this.$route.query.id,t="";if(t="qita"==this.jubaoContent?this.jubaoContentOther?.toString():this.jubaoContent,!t)return this.$message.error(this.$t("CourseDetail.qing_shu_ru_nei_rong")),!1;let i=this.$refs.customElUpload1.getAllFileIsUploadComplete();if(!i)return this.$message.error(this.$t("CourseDetail.tu_pian_wen_jian_zheng_zai")),!1;let s=this.$refs.customElUpload2.getAllFileIsUploadComplete();if(!s)return this.$message.error(this.$t("CourseDetail.shi_pin_wen_jian_zheng_zai")),!1;let a={id:e,report_option:t,images:this.jubaoForm.images,video:this.jubaoForm.videos};(0,r.ST)(a).then((e=>{200==e.code&&(this.$message.success(e.msg),this.JubaoVisible=!1,this.jubaoContent="",this.jubaoContentOther="",this.jubaoForm.images="",this.jubaoForm.videos="")}))},shareFun(){let e=window.location.href,t=this,i=e||"";if(!i)return this.$message.error(t.$t("CourseDetail.baoqianmeifuzhidao")),!1;this.$copyText(i).then((function(e){t.$message.success(t.$t("CourseDetail.fenxiangwangzhi"))}),(function(e){t.$message.error(t.$t("CourseDetail.baoqianmeifuzhidao"))}))},SubData(){let e={draft_id:this.$route.query.draftid,subject_name:this.previewForm.xueke,area:this.previewForm.area,address:this.previewForm.address,classroom_images:this.previewForm.classroomImgs,classroom_name:this.previewForm.classroomName,brief:this.previewForm.classroomDescribe,label_ids:this.previewForm.label_ids,price:this.previewForm.price};return console.log("console_data",JSON.parse(JSON.stringify(e))),e},FaBuFun(){this.allowSubmit=!1;let e=this.SubData();(0,r.ZK)(e).then((e=>{200==e.code?(this.$message.success(e.msg),this.allowSubmit=!0,this.previewForm={xueke:"",area:"",address:"",classroomImgs:"",classroomName:"",classroomDescribe:"",label_ids:"",price:""},this.$router.push({path:"/jsdRentalSharedClassrooms"})):this.allowSubmit=!0})).catch((e=>{this.allowSubmit=!0}))},SaveAndExit(){this.$router.push({path:"/jsdRentalSharedClassrooms"})}}},x=j,k=(0,v.Z)(x,s,a,!1,null,"bd2831c6",null),F=k.exports}}]);