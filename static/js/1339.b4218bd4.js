"use strict";(self["webpackChunkframe"]=self["webpackChunkframe"]||[]).push([[1339],{1339:function(t,i,e){e.r(i),e.d(i,{default:function(){return $}});var a=function(){var t=this,i=t._self._c;return i("div",{staticClass:"container wallet"},[i("HomeHeader",{staticClass:"header",attrs:{topimgIsShow:!1}}),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"listCon"},[t.walletObj?i("div",{staticClass:"center"},[i("div",{staticClass:"top"},[i("div",{staticClass:"item cardBox"},[i("div",{staticClass:"topLine"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("mywallet.qianbaoyue")))]),i("div",{staticClass:"money"},[i("span",[t._v("$")]),t._v(t._s(t.walletObj.balance))])]),i("div",{staticClass:"flexBtm"},[i("div",{staticClass:"jiluCon",on:{click:function(i){return t.JumpLinkXiaoFeiJilu("1")}}},[i("div",{staticClass:"text"},[t._v(" "+t._s(t.$t("mywallet.xiaofeijilu"))+" ")]),i("i",{staticClass:"icon fa fa-angle-right"})]),i("div",{staticClass:"rhtBtm"},[i("div",{staticClass:"btn bntTixian1",on:{click:function(i){t.tixianZhanghuVisible=!0}}},[t._v(" 提现账户 ")]),i("div",{staticClass:"btn bntTixian2",on:{click:t.tixianOptateShow}},[t._v(" "+t._s(t.$t("mywallet.tixian"))+" ")])])])]),i("div",{staticClass:"item item1"},[i("div",{staticClass:"liBox"},[i("div",{staticClass:"title2"},[t._v(" 充值金额 ")]),i("div",{staticClass:"money2"},[t._v(" $"+t._s(t.walletObj.recharge_money_all)+" ")]),i("div",{staticClass:"jiluCon",on:{click:function(i){return t.JumpLinkXiaoFeiJilu("2")}}},[i("div",{staticClass:"text2"},[i("div",{staticClass:"line"},[i("div",{staticClass:"lab"},[t._v("实际充值金额")]),i("span",[t._v("$"+t._s(t.walletObj.recharge_money_gift))])]),i("div",{staticClass:"line"},[i("div",{staticClass:"lab"},[t._v("赠送金额")]),i("span",[t._v("$"+t._s(t.walletObj.recharge_money_real))])])])])]),i("div",{staticClass:"liBox"},[i("div",{staticClass:"title2"},[t._v(" 经营收入 ")]),i("div",{staticClass:"money2"},[t._v("$"+t._s(t.walletObj.order_money_all))]),i("div",{staticClass:"jiluCon",on:{click:function(i){return t.JumpLinkXiaoFeiJilu("2")}}},[i("div",{staticClass:"text2"},[i("div",{staticClass:"line"},[i("div",{staticClass:"lab"},[t._v("当前收入")]),i("span",[t._v("$"+t._s(t.walletObj.order_money_available))])]),i("div",{staticClass:"line"},[i("div",{staticClass:"lab"},[t._v("未来收入")]),i("span",[t._v("$"+t._s(t.walletObj.order_money_unavailable))])])])])]),i("div",{staticClass:"liBox"},[i("div",{staticClass:"title2"},[t._v(" 邀请奖励 ")]),i("div",{staticClass:"money3"},[t._v("$"+t._s(t.walletObj.promotion_money_all))]),i("div",{staticClass:"jiluCon",on:{click:function(i){return t.JumpLinkXiaoFeiJilu("2")}}},[i("div",{staticClass:"text2"},[i("div",{staticClass:"line"},[i("div",{staticClass:"lab"},[t._v("奖励金额")]),i("span",[t._v("$"+t._s(t.walletObj.promotion_money_available))])])])])])])]),i("div",{staticClass:"twoCon"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("mywallet.chongzhi")))]),i("div",{staticClass:"chongzhiList"},t._l(t.RechargeConfigList,(function(e,a){return i("div",{key:e.id,staticClass:"item",class:{active:t.topUpItem?.id===e.id},on:{click:function(i){return t.RechargeConfigSelect(e)}}},[t._m(0,!0),i("div",{staticClass:"leftText1"},[t._v("$"),i("span",[t._v(t._s(t.$utils.calc.plus(e.price,e.give_price)))])]),i("div",{staticClass:"righttext"},[i("span",{staticClass:"title"},[t._v("售价")]),t._v(" "),i("span",{staticClass:"price"},[t._v("$"+t._s(Number(e.price)))])]),i("div",{staticClass:"leftText2"},[i("span",{staticClass:"title"},[t._v("赠")]),t._v(" "),i("span",{staticClass:"discount"},[t._v(t._s(Number(e.give_price)))])])])})),0),i("div",{staticClass:"left"},[i("el-checkbox",{staticClass:"check",model:{value:t.chongZhiChecked,callback:function(i){t.chongZhiChecked=i},expression:"chongZhiChecked"}}),i("span",{staticClass:"text"},[t._v(t._s(t.$t("mywallet.wotongyi")))]),i("router-link",{staticClass:"lefta",attrs:{to:"/privacyAgreement?type=zhifu"}},[t._v(" "+t._s(t.$t("Zhifu.policy")))])],1),i("el-button",{staticClass:"btn",attrs:{type:"primary",round:"",disabled:!t.topUpItem},on:{click:t.doTopUp}},[t._v(" "+t._s(t.$t("mywallet.chongzhi"))+" ")])],1)]):t._e()]),t.tixianZhanghuVisible?i("create-account-dialog",{model:{value:t.tixianZhanghuVisible,callback:function(i){t.tixianZhanghuVisible=i},expression:"tixianZhanghuVisible"}}):t._e(),t.tixianOptateVisible?i("withdraw-dialog",{on:{onEditAccount:function(i){t.tixianZhanghuVisible=!0}},model:{value:t.tixianOptateVisible,callback:function(i){t.tixianOptateVisible=i},expression:"tixianOptateVisible"}}):t._e(),i("HomeFooter",{staticClass:"footer"})],1)},s=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"rhtTop"},[i("i",{staticClass:"el-icon-check inner"})])}],l=(e(7658),e(8699)),n=e(6318),o=e(122),r=function(){var t=this,i=t._self._c;return i("el-dialog",{staticClass:"searchModal2",attrs:{title:t.$t("mywallet.add_account"),visible:t.dialogVisible,width:"460px","close-on-click-modal":!1,"append-to-body":"",center:""},on:{"update:visible":function(i){t.dialogVisible=i},close:()=>t.$emit("input",!1)}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modalMain"},[i("el-form",{ref:"refRuleForm",staticClass:"form",attrs:{model:t.ruleForm,rules:t.rules,"label-position":"top"}},[i("el-form-item",{attrs:{prop:"firstname",label:t.$t("mywallet.first_name")}},[i("el-input",{staticClass:"inpItem",attrs:{maxLength:"30"},model:{value:t.ruleForm.firstname,callback:function(i){t.$set(t.ruleForm,"firstname",i)},expression:"ruleForm.firstname"}})],1),i("el-form-item",{staticClass:"codeFormItem",attrs:{prop:"lastname",label:t.$t("mywallet.last_name")}},[i("el-input",{staticClass:"inpItem",attrs:{maxLength:"30"},model:{value:t.ruleForm.lastname,callback:function(i){t.$set(t.ruleForm,"lastname",i)},expression:"ruleForm.lastname"}})],1),i("el-form-item",{staticClass:"codeFormItem",attrs:{prop:"routing_no",label:t.$t("mywallet.path_no")}},[i("el-input",{staticClass:"inpItem",attrs:{type:"number"},model:{value:t.ruleForm.routing_no,callback:function(i){t.$set(t.ruleForm,"routing_no",i)},expression:"ruleForm.routing_no"}})],1),i("el-form-item",{staticClass:"codeFormItem",attrs:{prop:"account_no",label:t.$t("mywallet.bank_account")}},[i("el-input",{staticClass:"inpItem",attrs:{type:"number",maxLength:"30"},model:{value:t.ruleForm.account_no,callback:function(i){t.$set(t.ruleForm,"account_no",i)},expression:"ruleForm.account_no"}})],1),i("el-form-item",{staticClass:"codeFormItem",attrs:{label:t.$t("mywallet.cfm_bank_account"),prop:"cfm_account_no"}},[i("el-input",{staticClass:"inpItem",attrs:{type:"number"},model:{value:t.ruleForm.cfm_account_no,callback:function(i){t.$set(t.ruleForm,"cfm_account_no",i)},expression:"ruleForm.cfm_account_no"}})],1),i("el-form-item",{staticClass:"codeFormItem",attrs:{prop:"billing_address",label:t.$t("mywallet.address")}},[i("el-input",{staticClass:"inpItem",attrs:{type:"textarea","show-word-limit":"",maxLength:"250"},model:{value:t.ruleForm.billing_address,callback:function(i){t.$set(t.ruleForm,"billing_address",i)},expression:"ruleForm.billing_address"}})],1),i("el-form-item",{staticClass:"codeFormItem",attrs:{prop:"email",label:t.$t("mywallet.email")}},[i("el-input",{staticClass:"inpItem",model:{value:t.ruleForm.email,callback:function(i){t.$set(t.ruleForm,"email",i)},expression:"ruleForm.email"}})],1),i("el-form-item",{staticClass:"codeFormItem",attrs:{prop:"birthday",label:t.$t("mywallet.birthday")}},[i("el-date-picker",{staticClass:"inpItem",attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:t.ruleForm.birthday,callback:function(i){t.$set(t.ruleForm,"birthday",i)},expression:"ruleForm.birthday"}})],1)],1),i("div",{staticClass:"jpBtnGreen btnConfirm",on:{click:t.save}},[t._v(" "+t._s(t.ruleForm.id?t.$t("mywallet.cfm_modify"):t.$t("mywallet.cfm_add"))+" ")])],1)])},c=[],u={name:"CreateAccountDialog",props:["value"],data(){let t=(t,i,e)=>{i!==this.ruleForm.account_no?e(new Error(this.$t("mywallet.not_same"))):e()};return{dialogVisible:!1,ruleForm:{id:"",accountType:"",firstname:"",lastname:"",routing_no:"",account_no:"",cfm_account_no:"",billing_address:"",email:"",birthday:""},rules:{firstname:[{required:!0,message:this.$t("mywallet.required"),trigger:["blur","change"]}],lastname:[{required:!0,message:this.$t("mywallet.required"),trigger:["blur","change"]}],routing_no:[{required:!0,message:this.$t("mywallet.required"),trigger:["blur","change"]}],account_no:[{required:!0,message:this.$t("mywallet.required"),trigger:["blur","change"]}],cfm_account_no:[{required:!0,message:this.$t("mywallet.required"),trigger:["blur","change"]},{validator:t,trigger:"blur"}],billing_address:[{required:!0,message:this.$t("mywallet.required"),trigger:["blur","change"]}],email:[{required:!0,message:this.$t("mywallet.required"),trigger:["blur","change"]}],birthday:[{required:!0,message:this.$t("mywallet.required"),trigger:["blur","change"]}]},loading:!1,submitting:!1}},created(){this.dialogVisible=!!this.value,this.getAccountInfo()},watch:{value(t){this.dialogVisible=t},"ruleForm.routing_no"(t){t.length>9&&this.$nextTick((()=>{this.ruleForm.routing_no=t.substring(0,9)}))},"ruleForm.account_no"(t){t.length>30&&this.$nextTick((()=>{this.ruleForm.account_no=t.substring(0,30)}))},"ruleForm.cfm_account_no"(t){t.length>30&&this.$nextTick((()=>{this.ruleForm.cfm_account_no=t.substring(0,30)}))}},methods:{async getAccountInfo(){this.loading=!0;try{const t=await(0,o.nAi)();if(200===t.code){let i=t.data,e=i;if(!e)return!1;this.ruleForm={id:e.id,accountType:e.type,firstname:e.name,lastname:e.last_name,routing_no:e.path_num,account_no:e.bank_num,cfm_account_no:e.bank_num,billing_address:e.bill_address,email:e.email,birthday:e.brithday}}}catch(t){console.error(t)}this.loading=!1},async save(){this.submitting=!0;try{await this.$refs["refRuleForm"].validate();const t={type:this.ruleForm.accountType,name:this.ruleForm.firstname,last_name:this.ruleForm.lastname,path_num:this.ruleForm.routing_no,bank_num:this.ruleForm.account_no,affirm_bank_num:this.ruleForm.cfm_account_no,bill_address:this.ruleForm.billing_address,email:this.ruleForm.email,brithday:this.ruleForm.birthday};let i=o.HQm;this.ruleForm?.id&&(i=o.KV7);const e=await i(t);200===e.code&&(this.$message.success(this.$t("ShoppingCart.caozuochenggong")),this.dialogVisible=!1)}catch(t){console.error(t)}this.submitting=!1}}},m=u,d=e(1001),h=(0,d.Z)(m,r,c,!1,null,"b1aa5722",null),g=h.exports,_=function(){var t=this,i=t._self._c;return i("el-dialog",{staticClass:"searchModal3",attrs:{title:"提现申请",visible:t.dialogVisible,width:"460px","append-to-body":"","close-on-click-modal":!1,center:""},on:{"update:visible":function(i){t.dialogVisible=i},close:()=>t.$emit("input",!1)}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modalMain"},[i("div",[i("div",{staticClass:"tixianZhangHuCon",on:{click:t.onAccountClick}},[t.accountInfo?i("div",{staticClass:"num"},[i("div",{staticClass:"num1"},[t._v(t._s(`${t.accountInfo.name} ${t.accountInfo.last_name}`))]),i("div",{staticClass:"num2"},[t._v(t._s(t.accountInfo.bank_num))])]):i("div",{staticClass:"place-holder"},[t._v(" 请添加账户 ")]),i("i",{staticClass:"el-icon-arrow-right"})])]),i("div",[i("div",{staticClass:"form"},[i("div",{staticClass:"balance"},[t._v("可提现余额 "),i("span",[t._v("$"+t._s(t.walletObj.balance)+" ")])]),i("el-form",{ref:"refTixianRuleForm",attrs:{model:t.tixianRuleForm,rules:t.tixianRules}},[i("el-form-item",{attrs:{prop:"jinE"}},[i("div",{staticClass:"inputs"},[i("span",[t._v("$")]),i("el-input",{staticClass:"inpItem",attrs:{placeholder:""},model:{value:t.tixianRuleForm.jinE,callback:function(i){t.$set(t.tixianRuleForm,"jinE",i)},expression:"tixianRuleForm.jinE"}})],1)])],1)],1)]),i("el-button",{staticClass:"btnConfirm",attrs:{type:"primary",round:"",loading:t.submitting},on:{click:t.tixianConfirm}},[t._v(" 提交申请 ")])],1)])},b=[],p={name:"WithdrawDialog",props:["value"],data(){return{dialogVisible:!1,walletObj:{},tixianRuleForm:{jinE:""},tixianRules:{jinE:[{required:!0,message:this.$t("mywallet.required"),trigger:["blur","change"]},{pattern:/^(?!0\d)\d{1,7}(?:,\d{3})*(?:\.\d{1,2})?$/,message:this.$t("mywallet.format_incorrect")}]},accountInfo:null,loading:!1,submitting:!1}},created(){this.dialogVisible=!!this.value,this.getAccountInfo()},watch:{value(t){this.dialogVisible=t},"tixianRuleForm.jinE"(t){console.log(t),Number(t)>Number(this.walletObj.balance)&&this.$nextTick((()=>{this.tixianRuleForm.jinE=Number(this.walletObj.balance)}))}},methods:{async getAccountInfo(){this.loading=!0;try{const t=await Promise.all([(0,o.nAi)(),(0,o.fKV)()]);200===t[0].code&&(this.accountInfo=t[0].data),200===t[1].code&&(this.walletObj=t[1].data)}catch(t){console.error(t)}this.loading=!1},async tixianConfirm(){if(!this.accountInfo?.bank_num)return this.$message.error("未找到提现账户"),!1;this.submitting=!0;try{await this.$refs["refTixianRuleForm"].validate();let t={price:this.tixianRuleForm.jinE};const i=await(0,o.Hy2)(t);200===i.code&&(this.$message.success("提现申请已提交"),this.dialogVisible=!1)}catch(t){console.error(t)}this.submitting=!1},onAccountClick(){this.$emit("onEditAccount"),this.dialogVisible=!1}}},v=p,f=(0,d.Z)(v,_,b,!1,null,"dae905b8",null),C=f.exports,y={name:"login",components:{WithdrawDialog:C,CreateAccountDialog:g,HomeHeader:l.Z,HomeFooter:n.Z},data(){return{currentTab:"new",currentTabIndex:0,currentActive:0,query:{page:1,rows:10,status:0},walletObj:null,chongZhiChecked:!1,chongZhiIsAllow:!0,RechargeConfigList:"",tixianZhanghuVisible:!1,tixianOptateVisible:!1,topUpItem:null,loading:!1}},mounted(){this.getWallet(),this.getRechargeConfig()},methods:{onSubmit(){},JumpLinkXiaoFeiJilu(t){this.$router.push({path:"/expenseDetails",query:{type:t}})},async getWallet(){this.loading=!0;try{const t=await(0,o.fKV)();if(200===t.code){let i=t.data;this.walletObj=i}}catch(t){console.error(t)}this.loading=!1},validateMoney(t){var i=/^-?((0|[1-9]\d*)\.\d{1,2}|0?\.\d{1,2}|(0|[1-9]\d*))$/;return i.test(t)},async getRechargeConfig(){try{const t=await(0,o.k2)();if(200===t.code){let i=t.data,e=i;for(let t of e)t.select=!1;this.RechargeConfigList=e}}catch(t){console.error(t)}},RechargeConfigSelect(t){this.topUpItem=t},async doTopUp(){if(!this.chongZhiChecked)return this.$message.error(this.$t("mywallet.qingxiantongyijiaoyishuoming")),!1;let t={recharge_id:this.topUpItem.id,money:""};try{const i=await(0,o.QSV)(t);if(200===i.code){let t=i.data;this.$alert(this.$t("mywallet.chongzhiwanchenghou"),this.$t("mywallet.tishi"),{confirmButtonText:this.$t("mywallet.quedingbingshuaxin"),callback:t=>{location.reload()}}),window.open(t,"_blank")}}catch(i){console.error(i)}},tixianOptateShow(){this.tixianOptateVisible=!0,this.getWallet()}}},w=y,x=(0,d.Z)(w,a,s,!1,null,"1c9879a0",null),$=x.exports}}]);