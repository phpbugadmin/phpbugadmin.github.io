"use strict";(self["webpackChunkframe"]=self["webpackChunkframe"]||[]).push([[9830],{9830:function(t,e,s){s.r(e),s.d(e,{default:function(){return g}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"head"},[e("HomeHeader",{ref:"refHomeHeader",on:{seach:t.topSeachFun}}),e("XuekeMenu",{ref:"refXuekeMenu",attrs:{classifyType:"classroom"},on:{XuekeClick:t.getXuekeSelect,Saixuan:t.getSaixuan}})],1),e("div",{staticClass:"listCon"},[e("div",{staticClass:"center"},[e("div",{staticClass:"list"},t._l(t.List,(function(s){return e("div",{key:s.id,staticClass:"item",on:{click:function(e){return t.jumpLink(s)}}},[e("div",{staticClass:"left"},[e("div",{staticClass:"imgCon"},[e("el-carousel",{attrs:{height:"280px",autoplay:!1,loop:!1}},t._l(s.images_text,(function(t,s){return e("el-carousel-item",{key:s},[e("img",{staticClass:"img",attrs:{src:t,alt:""}})])})),1)],1),e("div",{staticClass:"bot"},[e("div",{staticClass:"title"},[t._v(" "+t._s(s.name_arr)+" ")]),e("div",{staticClass:"tags",domProps:{innerHTML:t._s(t.formatTags(s))}},[t._v(" "+t._s()+" ")]),e("div",{staticClass:"addr"},[e("span",{staticClass:"addrright el-icon-location-information"},[t._v(" "+t._s(s.area_text)+" ")])]),e("div",{staticClass:"price-row"},[e("div",{staticClass:"price"},[t._v(" $"+t._s(s.price)+" ")]),e("el-tooltip",{attrs:{effect:"dark",content:s.username,placement:"top-end"}},[e("el-avatar",{attrs:{src:s.avatar}})],1)],1)])])])})),0),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.querying,expression:"querying"}],staticClass:"loading"})])]),e("div",{staticClass:"foot"},[e("HomeFooter")],1)])},i=[],r=(s(7658),s(8805)),o=s(6318),n=s(9239),l=s(122),c={name:"login",components:{HomeHeader:r.Z,HomeFooter:o.Z,XuekeMenu:n.Z},data(){return{List:[],total:-1,query:{page:1,row:20,area:"",search_word:"",type:"0"},querying:!1,flag:""}},created(){this.getList(!0)},mounted(){window.addEventListener("scroll",this.handleScroll)},destroyed(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&(console.log("已经滚动到页面底部"),this.getList(!1))},formatTags(t){let e=[`${t.area_size} ft<sup>2</sup>`,...t.label_text].filter((t=>!!t));return e.join(" / ")},jumpLink(t){this.$router.push({path:"/ClassroomDetail",query:{id:t.id}})},async getList(t){if(t)this.total=-1,this.List=[],this.query.page=1,this.flag=Math.random();else if(this.querying)return;if(this.List?.length!==this.total){this.querying=!0;try{const t=await this.getListInternal(this.flag,this.query);if(this.flag===t.flag){let e=t.res;if(200===e.code){let t=e.data;this.total=t.total,this.List=[...this.List,...t.data],this.query.page++}}else console.log("wrong flag")}catch(e){console.error(e)}this.querying=!1}},async getListInternal(t,e){try{const s=await(0,l.BpN)(e);return{res:s,flag:t}}catch(s){return Promise.reject(s)}},getXuekeSelect(t){this.query={page:1,row:20,area:"",search_word:"",type:t.id},this.getList(!0)},topSeachFun(t){this.query.search_word=t,this.getList(!0)},getSaixuan(t){this.query.area=t?.area.toString()||"",this.getList(!0)}},watch:{"$route.query.first":function(t,e){this.query={page:1,row:15,search_word:"",subject_id:"0",area:"",course_type:"",course_way:"",gender:"",language:""},this.$refs.refXuekeMenu.refLRScrollMenuReset(),this.$refs.refHomeHeader.searchVal="",this.getList(!0)}}},u=c,d=s(1001),h=(0,d.Z)(u,a,i,!1,null,"bb930bbc",null),g=h.exports}}]);