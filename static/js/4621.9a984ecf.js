"use strict";(self["webpackChunkframe"]=self["webpackChunkframe"]||[]).push([[4621],{4621:function(e,a,t){t.r(a),t.d(a,{default:function(){return g}});var o=function(){var e=this,a=e._self._c;return a("div",{staticClass:"container"},[a("home-header"),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"center"},[e.userInfo?a("div",{staticClass:"content"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.uploading,expression:"uploading"}],staticClass:"avatar-box"},[a("el-upload",{ref:"refElUpload",staticClass:"avatar-uploader",attrs:{action:`${e.baseURL}api/index/upload`,headers:{token:e.vuex_token},"show-file-list":!1,"before-upload":()=>e.uploading=!0,"on-error":()=>e.uploading=!1,"on-success":e.handleAvatarSuccess,accept:"image/*",limit:1}},[a("img",{staticClass:"head",attrs:{id:"headImg",src:e.userInfo.avatar,alt:""}})]),a("div",{staticClass:"editCon",on:{click:e.changeAvatar}},[a("i",{staticClass:"icon el-icon-camera-solid"}),a("div",{staticClass:"text"},[e._v(" "+e._s(e.$t("myPersonalInfo.bianiji"))+" ")])])],1),a("div",{staticClass:"info-box"},[a("div",{staticClass:"title-box"},[a("div",{staticClass:"title"},[e._v(e._s(e.$t("myPersonalInfo.ningdegerenziliao")))]),a("div",{staticClass:"subTitle"},[e._v(e._s(e.$t("myPersonalInfo.ningtigongdexinxijiangzai")))])]),a("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,"label-position":"top",rules:e.rules}},[a("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.chushengshijian"),prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",placeholder:""},model:{value:e.ruleForm.birthday,callback:function(a){e.$set(e.ruleForm,"birthday",a)},expression:"ruleForm.birthday"}})],1),a("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.jiuduxuexiao"),prop:"school"}},[a("el-input",{attrs:{maxlength:50,"show-word-limit":""},model:{value:e.ruleForm.school,callback:function(a){e.$set(e.ruleForm,"school",a)},expression:"ruleForm.school"}})],1),a("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.zhuanye"),prop:"major"}},[a("el-input",{attrs:{maxlength:50,"show-word-limit":""},model:{value:e.ruleForm.major,callback:function(a){e.$set(e.ruleForm,"major",a)},expression:"ruleForm.major"}})],1),a("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.yuyan"),prop:"language"}},[a("el-input",{attrs:{maxlength:50,"show-word-limit":""},model:{value:e.ruleForm.language,callback:function(a){e.$set(e.ruleForm,"language",a)},expression:"ruleForm.language"}})],1),a("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.gender"),prop:"gender"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.ruleForm.gender,callback:function(a){e.$set(e.ruleForm,"gender",a)},expression:"ruleForm.gender"}},e._l(e.genderOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.jiaoxuenianling"),prop:"teaching_age"}},[a("el-input-number",{attrs:{min:0,max:100},model:{value:e.ruleForm.teaching_age,callback:function(a){e.$set(e.ruleForm,"teaching_age",a)},expression:"ruleForm.teaching_age"}})],1),a("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.xueli"),prop:"education"}},[a("el-input",{attrs:{maxlength:50,"show-word-limit":""},model:{value:e.ruleForm.education,callback:function(a){e.$set(e.ruleForm,"education",a)},expression:"ruleForm.education"}})],1),a("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("myPersonalInfo.intro_me"),prop:"about_you"}},[a("el-input",{attrs:{type:"textarea",maxlength:500,rows:4,placeholder:e.$t("myPersonalInfo.xieyixieyouqu"),"show-word-limit":""},model:{value:e.ruleForm.about_you,callback:function(a){e.$set(e.ruleForm,"about_you",a)},expression:"ruleForm.about_you"}})],1)],1),a("el-button",{staticClass:"btn",attrs:{type:"primary",loading:e.submitting},on:{click:e.save}},[e._v(e._s(e.$t("myPersonalInfo.save")))])],1)]):e._e()]),a("HomeFooter")],1)},r=[],l=t(512),s=t(2128),i=t(1206),n=t(8550),u={name:"PersonalInfo",components:{HomeFooter:n.Z,HomeHeader:l.Z},data(){return{baseURL:s.v,imageUrl:"",userInfo:null,uploading:!1,submitting:!1,loading:!1,ruleForm:{birthday:"",school:"",major:"",language:"",gender:"",teaching_age:"",education:"",about_you:""},rules:{}}},computed:{genderOptions(){return[{id:2,label:this.$t("XuekeMenu.nan"),value:1},{id:3,label:this.$t("XuekeMenu.nv"),value:2}]}},mounted(){this.getUserInfo()},methods:{async getUserInfo(){this.loading=!0;try{const e=await(0,i.LUH)();200===e.code&&(this.userInfo=e.data,this.ruleForm.birthday=e.data.birthday,this.ruleForm.school=e.data.school,this.ruleForm.major=e.data.major,this.ruleForm.language=e.data.language,this.ruleForm.gender=parseInt(e.data.gender)||"",this.ruleForm.teaching_age=e.data.teaching_age,this.ruleForm.education=e.data.education,this.ruleForm.about_you=e.data.about_you)}catch(e){console.error(e)}this.loading=!1},changeAvatar(){document.getElementById("headImg").click()},async handleAvatarSuccess(e,a){if(200===e.code){const a=e.data.fullurl;try{let e=await(0,i.cPE)({avatar:a});200===e.code&&(await this.getUserInfo(),this.$message.success(this.$t("myPersonalInfo.otuxiangshangchuanch")))}catch(t){console.error(t)}}else this.$message.error(this.$t("myPersonalInfo.avatar_upload_failed"));this.uploading=!1},async save(){try{await this.$refs.ruleForm.validate(),this.submitting=!0;const e=await(0,i.cPE)(this.ruleForm);200===e.code&&await this.getUserInfo()}catch(e){console.error(e)}this.submitting=!1}}},m=u,c=t(1001),d=(0,c.Z)(m,o,r,!1,null,"069c5d97",null),g=d.exports}}]);